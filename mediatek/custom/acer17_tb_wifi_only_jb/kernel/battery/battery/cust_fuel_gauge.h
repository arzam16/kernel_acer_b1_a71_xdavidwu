#include <mach/mt_typedefs.h>

#define FGAUGE_VOLTAGE_FACTOR           2.44 // mV
#define FGAUGE_CURRENT_FACTOR           6.25 // uV/Rsns
#define FGAUGE_CURRENT_OFFSET_FACTOR    1.56 // uV/Rsns
#define FGAUGE_CAR_FACTOR               6.25 // uV/Rsns
#define FGAUGE_RSNS_FACTOR              0.02 // Ohm

//#define COMPASATE_OCV                   80 // mV for evb
#define COMPASATE_OCV                   40 // mV for phone

#define BATTERY_VOLTAGE_MINIMUM         3400
#define BATTERY_VOLTAGE_MAXIMUM         4200

//#define BATTERY_CAPACITY_MAXIMUM        3600
#define BATTERY_CAPACITY_MAXIMUM        2799

#define TEMPERATURE_T0                  110
#define TEMPERATURE_T1                  0
#define TEMPERATURE_T2                  25
#define TEMPERATURE_T3                  50
#define TEMPERATURE_T                   255 // This should be fixed, never change the value

//#define BATT_CAPACITY                   1280
//#define BATT_CAPACITY                   3602
#define BATT_CAPACITY                   2790

#define ENABLE_SW_COULOMB_COUNTER       0 // 1 is enable, 0 is disable
//#define ENABLE_SW_COULOMB_COUNTER       1 // 1 is enable, 0 is disable

//#define FG_CURRENT_OFFSET_DISCHARGING 	31
#define FG_CURRENT_OFFSET_DISCHARGING 	0

#define FG_RESISTANCE 	20

#define FG_METER_RESISTANCE 	0
//#define FG_METER_RESISTANCE 	540 // current meter

//#define MAX_BOOTING_TIME_FGCURRENT	5*6 // 5 seconds, 6 points = 1s
#define MAX_BOOTING_TIME_FGCURRENT	1*10 // 10s

#if defined(CONFIG_POWER_EXT)
//#define OCV_BOARD_COMPESATE	32 //mV
#define OCV_BOARD_COMPESATE	72 //mV
#define R_FG_BOARD_BASE		1000
#define R_FG_BOARD_SLOPE	1000 //slope
#else
//#define OCV_BOARD_COMPESATE	0 //mV
//#define OCV_BOARD_COMPESATE	48 //mV
//#define OCV_BOARD_COMPESATE	25 //mV
#define OCV_BOARD_COMPESATE	0 //mV
#define R_FG_BOARD_BASE		1000
#define R_FG_BOARD_SLOPE	1000 //slope
//#define R_FG_BOARD_SLOPE	1057 //slope
//#define R_FG_BOARD_SLOPE	1075 //slope
#endif

#define Q_MAX_POS_50_BAT1	2799
#define Q_MAX_POS_25_BAT1	2790
#define Q_MAX_POS_0_BAT1		2628
#define Q_MAX_NEG_10_BAT1	1845

#define Q_MAX_POS_50_H_CURRENT_BAT1	2754
#define Q_MAX_POS_25_H_CURRENT_BAT1	2722
#define Q_MAX_POS_0_H_CURRENT_BAT1	  1936
#define Q_MAX_NEG_10_H_CURRENT_BAT1	627

#define Q_MAX_POS_50_BAT2	2799
#define Q_MAX_POS_25_BAT2	2790
#define Q_MAX_POS_0_BAT2		2628
#define Q_MAX_NEG_10_BAT2	1845

#define Q_MAX_POS_50_H_CURRENT_BAT2	2754
#define Q_MAX_POS_25_H_CURRENT_BAT2	2722
#define Q_MAX_POS_0_H_CURRENT_BAT2	  1936
#define Q_MAX_NEG_10_H_CURRENT_BAT2	627

#define R_FG_VALUE 				20 // mOhm, base is 20
#define CURRENT_DETECT_R_FG	100  //10mA

#define OSR_SELECT_7			0

#define CAR_TUNE_VALUE			107 //1.07

#ifdef MTK_NCP1851_SUPPORT
#define OCV_USE_BATSNS
#define R_QFET_VALUE			15 // (10+20)/2
#endif

/////////////////////////////////////////////////////////////////////
// <DOD, Battery_Voltage> Table
/////////////////////////////////////////////////////////////////////
typedef struct _BATTERY_PROFILE_STRUC
{
    kal_int32 percentage;
    kal_int32 voltage;
} BATTERY_PROFILE_STRUC, *BATTERY_PROFILE_STRUC_P;

typedef enum
{
    T1_0C,
    T2_25C,
    T3_50C
} PROFILE_TEMPERATURE;

//BAT1 DOD0 profile
// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0_bat1[] =
{
    {0  , 4114},
    {3  , 4093},
    {6  , 4074},
    {9  , 4054},
    {12 , 4030},
    {15 , 4009},
    {18 , 3994},
    {20 , 3980},
    {23 , 3968},
    {26 , 3956},
    {29 , 3946},
    {32 , 3933},
    {35 , 3919},
    {38 , 3900},
    {41 , 3880},
    {44 , 3865},
    {47 , 3854},
    {50 , 3846},
    {53 , 3839},
    {56 , 3832},
    {58 , 3825},
    {61 , 3816},
    {64 , 3811},
    {67 , 3806},
    {70 , 3801},
    {73 , 3797},
    {76 , 3791},
    {78 , 3788},
    {80 , 3786},
    {82 , 3785},
    {83 , 3784},
    {84 , 3782},
    {85 , 3781},
    {86 , 3781},
    {87 , 3779},
    {88 , 3780},
    {89 , 3779},
    {89 , 3778},
    {90 , 3778},
    {91 , 3778},
    {91 , 3778},
    {92 , 3777},
    {92 , 3777},
    {92 , 3776},
    {93 , 3777},
    {93 , 3775},
    {94 , 3775},
    {94 , 3775},
    {94 , 3775},
    {95 , 3775},
    {95 , 3775},
    {95 , 3774},
    {96 , 3774},
    {96 , 3774},
    {96 , 3773},
    {96 , 3772},
    {97 , 3773},
    {97 , 3771},
    {97 , 3772},
    {97 , 3771},
    {98 , 3770},
    {98 , 3770},
    {98 , 3770},
    {98 , 3771},
    {98 , 3770},
    {99 , 3769},
    {99 , 3769},
    {99 , 3770},
    {99 , 3768},
    {99 , 3769},
    {99 , 3768},
    {100, 3767},
    {100, 3768},
    {100, 3766},
    {100, 3766}
};

// T1 0C
BATTERY_PROFILE_STRUC battery_profile_t1_bat1[] =
{
    {0  , 4155},
    {2  , 4132},
    {4  , 4114},
    {6  , 4098},
    {8  , 4085},
    {10 , 4069},
    {12 , 4049},
    {14 , 4029},
    {16 , 4010},
    {18 , 3994},
    {21 , 3981},
    {23 , 3968},
    {25 , 3956},
    {27 , 3943},
    {29 , 3928},
    {31 , 3912},
    {33 , 3895},
    {35 , 3879},
    {37 , 3867},
    {39 , 3858},
    {41 , 3849},
    {43 , 3840},
    {45 , 3833},
    {47 , 3827},
    {49 , 3820},
    {51 , 3813},
    {53 , 3808},
    {55 , 3803},
    {57 , 3798},
    {60 , 3795},
    {62 , 3790},
    {64 , 3786},
    {66 , 3784},
    {68 , 3780},
    {70 , 3775},
    {72 , 3771},
    {74 , 3766},
    {76 , 3759},
    {78 , 3749},
    {80 , 3739},
    {82 , 3727},
    {84 , 3714},
    {86 , 3705},
    {88 , 3700},
    {90 , 3697},
    {92 , 3692},
    {94 , 3688},
    {95 , 3683},
    {96 , 3677},
    {96 , 3673},
    {97 , 3665},
    {97 , 3658},
    {98 , 3649},
    {98 , 3643},
    {98 , 3636},
    {98 , 3630},
    {99 , 3625},
    {99 , 3621},
    {99 , 3616},
    {99 , 3613},
    {99 , 3610},
    {99 , 3606},
    {99 , 3603},
    {99 , 3602},
    {99 , 3598},
    {100, 3596},
    {100, 3593},
    {100, 3591},
    {100, 3589},
    {100, 3587},
    {100, 3584},
    {100, 3582},
    {100, 3581},
    {100, 3579},
    {100, 3579}
};

// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2_bat1[] =
{
    {0  , 4181},
    {2  , 4161},
    {4  , 4143},
    {6  , 4126},
    {8  , 4108},
    {10 , 4093},
    {12 , 4079},
    {14 , 4063},
    {15 , 4046},
    {17 , 4028},
    {19 , 4011},
    {21 , 3997},
    {23 , 3984},
    {25 , 3971},
    {27 , 3961},
    {29 , 3949},
    {31 , 3935},
    {33 , 3920},
    {35 , 3901},
    {37 , 3884},
    {39 , 3870},
    {41 , 3859},
    {43 , 3851},
    {44 , 3843},
    {46 , 3833},
    {48 , 3827},
    {50 , 3820},
    {52 , 3814},
    {54 , 3809},
    {56 , 3803},
    {58 , 3798},
    {60 , 3793},
    {62 , 3788},
    {64 , 3783},
    {66 , 3779},
    {68 , 3775},
    {70 , 3770},
    {72 , 3766},
    {73 , 3757},
    {75 , 3751},
    {77 , 3742},
    {79 , 3732},
    {81 , 3719},
    {83 , 3704},
    {85 , 3692},
    {87 , 3690},
    {89 , 3686},
    {91 , 3684},
    {93 , 3680},
    {95 , 3663},
    {97 , 3599},
    {99 , 3506},
    {100, 3376},
    {101, 3353},
    {101, 3338},
    {101, 3330},
    {101, 3327},
    {101, 3323},
    {101, 3322},
    {101, 3321},
    {101, 3320},
    {101, 3320},
    {101, 3319},
    {101, 3320},
    {101, 3318},
    {101, 3318},
    {101, 3317},
    {101, 3316},
    {101, 3315},
    {101, 3316},
    {101, 3315},
    {101, 3314},
    {101, 3313},
    {101, 3312},
    {101, 3312}
};

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3_bat1[] =
{
    {0  , 4183},
    {2  , 4165},
    {4  , 4146},
    {6  , 4128},
    {8  , 4112},
    {10 , 4094},
    {12 , 4078},
    {14 , 4062},
    {15 , 4048},
    {17 , 4031},
    {19 , 4017},
    {21 , 4001},
    {23 , 3989},
    {25 , 3976},
    {27 , 3964},
    {29 , 3950},
    {31 , 3938},
    {33 , 3924},
    {35 , 3907},
    {37 , 3888},
    {39 , 3874},
    {40 , 3862},
    {42 , 3853},
    {44 , 3845},
    {46 , 3837},
    {48 , 3827},
    {50 , 3822},
    {52 , 3814},
    {54 , 3808},
    {56 , 3803},
    {58 , 3796},
    {60 , 3792},
    {62 , 3788},
    {64 , 3782},
    {66 , 3775},
    {67 , 3764},
    {69 , 3755},
    {71 , 3749},
    {73 , 3743},
    {75 , 3736},
    {77 , 3728},
    {79 , 3720},
    {81 , 3708},
    {83 , 3693},
    {85 , 3679},
    {87 , 3676},
    {89 , 3673},
    {91 , 3672},
    {93 , 3669},
    {94 , 3654},
    {96 , 3600},
    {98 , 3517},
    {100, 3382},
    {101, 3314},
    {101, 3302},
    {101, 3298},
    {101, 3296},
    {101, 3295},
    {101, 3294},
    {101, 3292},
    {101, 3293},
    {101, 3292},
    {101, 3291},
    {101, 3292},
    {101, 3292},
    {101, 3291},
    {101, 3289},
    {101, 3288},
    {101, 3289},
    {101, 3287},
    {101, 3286},
    {101, 3285},
    {101, 3285},
    {101, 3284},
    {101, 3284}
};

//BAT2 DOD0 profile
// T0 -10C
BATTERY_PROFILE_STRUC battery_profile_t0_bat2[] =
{
    {0  , 4114},
    {3  , 4093},
    {6  , 4074},
    {9  , 4054},
    {12 , 4030},
    {15 , 4009},
    {18 , 3994},
    {20 , 3980},
    {23 , 3968},
    {26 , 3956},
    {29 , 3946},
    {32 , 3933},
    {35 , 3919},
    {38 , 3900},
    {41 , 3880},
    {44 , 3865},
    {47 , 3854},
    {50 , 3846},
    {53 , 3839},
    {56 , 3832},
    {58 , 3825},
    {61 , 3816},
    {64 , 3811},
    {67 , 3806},
    {70 , 3801},
    {73 , 3797},
    {76 , 3791},
    {78 , 3788},
    {80 , 3786},
    {82 , 3785},
    {83 , 3784},
    {84 , 3782},
    {85 , 3781},
    {86 , 3781},
    {87 , 3779},
    {88 , 3780},
    {89 , 3779},
    {89 , 3778},
    {90 , 3778},
    {91 , 3778},
    {91 , 3778},
    {92 , 3777},
    {92 , 3777},
    {92 , 3776},
    {93 , 3777},
    {93 , 3775},
    {94 , 3775},
    {94 , 3775},
    {94 , 3775},
    {95 , 3775},
    {95 , 3775},
    {95 , 3774},
    {96 , 3774},
    {96 , 3774},
    {96 , 3773},
    {96 , 3772},
    {97 , 3773},
    {97 , 3771},
    {97 , 3772},
    {97 , 3771},
    {98 , 3770},
    {98 , 3770},
    {98 , 3770},
    {98 , 3771},
    {98 , 3770},
    {99 , 3769},
    {99 , 3769},
    {99 , 3770},
    {99 , 3768},
    {99 , 3769},
    {99 , 3768},
    {100, 3767},
    {100, 3768},
    {100, 3766},
    {100, 3766}
};

// T1 0C
BATTERY_PROFILE_STRUC battery_profile_t1_bat2[] =
{
    {0  , 4155},
    {2  , 4132},
    {4  , 4114},
    {6  , 4098},
    {8  , 4085},
    {10 , 4069},
    {12 , 4049},
    {14 , 4029},
    {16 , 4010},
    {18 , 3994},
    {21 , 3981},
    {23 , 3968},
    {25 , 3956},
    {27 , 3943},
    {29 , 3928},
    {31 , 3912},
    {33 , 3895},
    {35 , 3879},
    {37 , 3867},
    {39 , 3858},
    {41 , 3849},
    {43 , 3840},
    {45 , 3833},
    {47 , 3827},
    {49 , 3820},
    {51 , 3813},
    {53 , 3808},
    {55 , 3803},
    {57 , 3798},
    {60 , 3795},
    {62 , 3790},
    {64 , 3786},
    {66 , 3784},
    {68 , 3780},
    {70 , 3775},
    {72 , 3771},
    {74 , 3766},
    {76 , 3759},
    {78 , 3749},
    {80 , 3739},
    {82 , 3727},
    {84 , 3714},
    {86 , 3705},
    {88 , 3700},
    {90 , 3697},
    {92 , 3692},
    {94 , 3688},
    {95 , 3683},
    {96 , 3677},
    {96 , 3673},
    {97 , 3665},
    {97 , 3658},
    {98 , 3649},
    {98 , 3643},
    {98 , 3636},
    {98 , 3630},
    {99 , 3625},
    {99 , 3621},
    {99 , 3616},
    {99 , 3613},
    {99 , 3610},
    {99 , 3606},
    {99 , 3603},
    {99 , 3602},
    {99 , 3598},
    {100, 3596},
    {100, 3593},
    {100, 3591},
    {100, 3589},
    {100, 3587},
    {100, 3584},
    {100, 3582},
    {100, 3581},
    {100, 3579},
    {100, 3579}
};

// T2 25C
BATTERY_PROFILE_STRUC battery_profile_t2_bat2[] =
{
    {0  , 4181},
    {2  , 4161},
    {4  , 4143},
    {6  , 4126},
    {8  , 4108},
    {10 , 4093},
    {12 , 4079},
    {14 , 4063},
    {15 , 4046},
    {17 , 4028},
    {19 , 4011},
    {21 , 3997},
    {23 , 3984},
    {25 , 3971},
    {27 , 3961},
    {29 , 3949},
    {31 , 3935},
    {33 , 3920},
    {35 , 3901},
    {37 , 3884},
    {39 , 3870},
    {41 , 3859},
    {43 , 3851},
    {44 , 3843},
    {46 , 3833},
    {48 , 3827},
    {50 , 3820},
    {52 , 3814},
    {54 , 3809},
    {56 , 3803},
    {58 , 3798},
    {60 , 3793},
    {62 , 3788},
    {64 , 3783},
    {66 , 3779},
    {68 , 3775},
    {70 , 3770},
    {72 , 3766},
    {73 , 3757},
    {75 , 3751},
    {77 , 3742},
    {79 , 3732},
    {81 , 3719},
    {83 , 3704},
    {85 , 3692},
    {87 , 3690},
    {89 , 3686},
    {91 , 3684},
    {93 , 3680},
    {95 , 3663},
    {97 , 3599},
    {99 , 3506},
    {100, 3376},
    {101, 3353},
    {101, 3338},
    {101, 3330},
    {101, 3327},
    {101, 3323},
    {101, 3322},
    {101, 3321},
    {101, 3320},
    {101, 3320},
    {101, 3319},
    {101, 3320},
    {101, 3318},
    {101, 3318},
    {101, 3317},
    {101, 3316},
    {101, 3315},
    {101, 3316},
    {101, 3315},
    {101, 3314},
    {101, 3313},
    {101, 3312},
    {101, 3312}
};

// T3 50C
BATTERY_PROFILE_STRUC battery_profile_t3_bat2[] =
{
    {0  , 4183},
    {2  , 4165},
    {4  , 4146},
    {6  , 4128},
    {8  , 4112},
    {10 , 4094},
    {12 , 4078},
    {14 , 4062},
    {15 , 4048},
    {17 , 4031},
    {19 , 4017},
    {21 , 4001},
    {23 , 3989},
    {25 , 3976},
    {27 , 3964},
    {29 , 3950},
    {31 , 3938},
    {33 , 3924},
    {35 , 3907},
    {37 , 3888},
    {39 , 3874},
    {40 , 3862},
    {42 , 3853},
    {44 , 3845},
    {46 , 3837},
    {48 , 3827},
    {50 , 3822},
    {52 , 3814},
    {54 , 3808},
    {56 , 3803},
    {58 , 3796},
    {60 , 3792},
    {62 , 3788},
    {64 , 3782},
    {66 , 3775},
    {67 , 3764},
    {69 , 3755},
    {71 , 3749},
    {73 , 3743},
    {75 , 3736},
    {77 , 3728},
    {79 , 3720},
    {81 , 3708},
    {83 , 3693},
    {85 , 3679},
    {87 , 3676},
    {89 , 3673},
    {91 , 3672},
    {93 , 3669},
    {94 , 3654},
    {96 , 3600},
    {98 , 3517},
    {100, 3382},
    {101, 3314},
    {101, 3302},
    {101, 3298},
    {101, 3296},
    {101, 3295},
    {101, 3294},
    {101, 3292},
    {101, 3293},
    {101, 3292},
    {101, 3291},
    {101, 3292},
    {101, 3292},
    {101, 3291},
    {101, 3289},
    {101, 3288},
    {101, 3289},
    {101, 3287},
    {101, 3286},
    {101, 3285},
    {101, 3285},
    {101, 3284},
    {101, 3284}
};


// battery profile for actual temperature. The size should be the same as T1, T2 and T3
BATTERY_PROFILE_STRUC battery_profile_temperature[] =
{
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0}
};

/////////////////////////////////////////////////////////////////////
// <Rbat, Battery_Voltage> Table
/////////////////////////////////////////////////////////////////////
typedef struct _R_PROFILE_STRUC
{
    kal_int32 resistance; // Ohm
    kal_int32 voltage;
} R_PROFILE_STRUC, *R_PROFILE_STRUC_P;

//BAT1 R profile
// T0 -10C
R_PROFILE_STRUC r_profile_t0_bat1[] =
{
    {697, 4114},
    {697, 4093},
    {725, 4074},
    {752, 4054},
    {767, 4030},
    {787, 4009},
    {805, 3994},
    {815, 3980},
    {828, 3968},
    {847, 3956},
    {863, 3946},
    {868, 3933},
    {877, 3919},
    {882, 3900},
    {880, 3880},
    {882, 3865},
    {890, 3854},
    {898, 3846},
    {907, 3839},
    {918, 3832},
    {930, 3825},
    {930, 3816},
    {940, 3811},
    {948, 3806},
    {957, 3801},
    {972, 3797},
    {980, 3791},
    {982, 3788},
    {977, 3786},
    {977, 3785},
    {975, 3784},
    {970, 3782},
    {968, 3781},
    {972, 3781},
    {965, 3779},
    {968, 3780},
    {967, 3779},
    {963, 3778},
    {963, 3778},
    {965, 3778},
    {965, 3778},
    {963, 3777},
    {965, 3777},
    {963, 3776},
    {962, 3777},
    {960, 3775},
    {960, 3775},
    {962, 3775},
    {960, 3775},
    {960, 3775},
    {962, 3775},
    {960, 3774},
    {960, 3774},
    {960, 3774},
    {957, 3773},
    {958, 3772},
    {957, 3773},
    {955, 3771},
    {955, 3772},
    {953, 3771},
    {952, 3770},
    {953, 3770},
    {952, 3770},
    {955, 3771},
    {952, 3770},
    {952, 3769},
    {953, 3769},
    {950, 3770},
    {947, 3768},
    {948, 3769},
    {950, 3768},
    {948, 3767},
    {948, 3768},
    {943, 3766},
    {945, 3766}
};

// T1 0C
R_PROFILE_STRUC r_profile_t1_bat1[] =
{
    {348, 4155},
    {348, 4132},
    {358, 4114},
    {367, 4098},
    {378, 4085},
    {387, 4069},
    {392, 4049},
    {403, 4029},
    {408, 4010},
    {417, 3994},
    {425, 3981},
    {433, 3968},
    {442, 3956},
    {447, 3943},
    {448, 3928},
    {448, 3912},
    {445, 3895},
    {442, 3879},
    {445, 3867},
    {453, 3858},
    {458, 3849},
    {462, 3840},
    {473, 3833},
    {480, 3827},
    {483, 3820},
    {490, 3813},
    {498, 3808},
    {505, 3803},
    {512, 3798},
    {520, 3795},
    {522, 3790},
    {535, 3786},
    {550, 3784},
    {563, 3780},
    {578, 3775},
    {593, 3771},
    {613, 3766},
    {623, 3759},
    {635, 3749},
    {650, 3739},
    {665, 3727},
    {678, 3714},
    {695, 3705},
    {715, 3700},
    {747, 3697},
    {785, 3692},
    {815, 3688},
    {807, 3683},
    {797, 3677},
    {790, 3673},
    {777, 3665},
    {763, 3658},
    {750, 3649},
    {740, 3643},
    {727, 3636},
    {720, 3630},
    {708, 3625},
    {707, 3621},
    {697, 3616},
    {690, 3613},
    {687, 3610},
    {682, 3606},
    {673, 3603},
    {672, 3602},
    {667, 3598},
    {665, 3596},
    {658, 3593},
    {657, 3591},
    {650, 3589},
    {650, 3587},
    {643, 3584},
    {643, 3582},
    {643, 3581},
    {637, 3579},
    {638, 3579}
};

// T2 25C
R_PROFILE_STRUC r_profile_t2_bat1[] =
{
    {170, 4181},
    {170, 4161},
    {172, 4143},
    {172, 4126},
    {172, 4108},
    {175, 4093},
    {178, 4079},
    {178, 4063},
    {178, 4046},
    {180, 4028},
    {183, 4011},
    {183, 3997},
    {188, 3984},
    {192, 3971},
    {198, 3961},
    {202, 3949},
    {207, 3935},
    {202, 3920},
    {193, 3901},
    {183, 3884},
    {180, 3870},
    {183, 3859},
    {185, 3851},
    {185, 3843},
    {182, 3833},
    {187, 3827},
    {190, 3820},
    {190, 3814},
    {195, 3809},
    {192, 3803},
    {197, 3798},
    {197, 3793},
    {198, 3788},
    {197, 3783},
    {197, 3779},
    {200, 3775},
    {202, 3770},
    {207, 3766},
    {202, 3757},
    {205, 3751},
    {205, 3742},
    {208, 3732},
    {208, 3719},
    {213, 3704},
    {208, 3692},
    {213, 3690},
    {220, 3686},
    {233, 3684},
    {245, 3680},
    {255, 3663},
    {255, 3599},
    {272, 3506},
    {295, 3376},
    {258, 3353},
    {232, 3338},
    {218, 3330},
    {212, 3327},
    {207, 3323},
    {203, 3322},
    {203, 3321},
    {202, 3320},
    {205, 3320},
    {203, 3319},
    {202, 3320},
    {203, 3318},
    {205, 3318},
    {200, 3317},
    {202, 3316},
    {200, 3315},
    {202, 3316},
    {207, 3315},
    {202, 3314},
    {205, 3313},
    {202, 3312},
    {208, 3312}
};

// T3 50C
R_PROFILE_STRUC r_profile_t3_bat1[] =
{
    {157, 4183},
    {157, 4165},
    {155, 4146},
    {155, 4128},
    {160, 4112},
    {157, 4094},
    {157, 4078},
    {157, 4062},
    {160, 4048},
    {162, 4031},
    {162, 4017},
    {162, 4001},
    {163, 3989},
    {165, 3976},
    {172, 3964},
    {172, 3950},
    {175, 3938},
    {175, 3924},
    {172, 3907},
    {165, 3888},
    {162, 3874},
    {160, 3862},
    {158, 3853},
    {160, 3845},
    {162, 3837},
    {158, 3827},
    {162, 3822},
    {162, 3814},
    {163, 3808},
    {167, 3803},
    {165, 3796},
    {172, 3792},
    {172, 3788},
    {172, 3782},
    {172, 3775},
    {163, 3764},
    {162, 3755},
    {163, 3749},
    {165, 3743},
    {167, 3736},
    {167, 3728},
    {167, 3720},
    {165, 3708},
    {165, 3693},
    {163, 3679},
    {165, 3676},
    {165, 3673},
    {172, 3672},
    {177, 3669},
    {177, 3654},
    {182, 3600},
    {188, 3517},
    {197, 3382},
    {190, 3314},
    {170, 3302},
    {165, 3298},
    {160, 3296},
    {158, 3295},
    {158, 3294},
    {155, 3292},
    {158, 3293},
    {155, 3292},
    {152, 3291},
    {155, 3292},
    {157, 3292},
    {153, 3291},
    {153, 3289},
    {153, 3288},
    {155, 3289},
    {153, 3287},
    {152, 3286},
    {153, 3285},
    {153, 3285},
    {155, 3284},
    {155, 3284}
};

//BAT2 R profile
// T0 -10C
R_PROFILE_STRUC r_profile_t0_bat2[] =
{
    {697, 4114},
    {697, 4093},
    {725, 4074},
    {752, 4054},
    {767, 4030},
    {787, 4009},
    {805, 3994},
    {815, 3980},
    {828, 3968},
    {847, 3956},
    {863, 3946},
    {868, 3933},
    {877, 3919},
    {882, 3900},
    {880, 3880},
    {882, 3865},
    {890, 3854},
    {898, 3846},
    {907, 3839},
    {918, 3832},
    {930, 3825},
    {930, 3816},
    {940, 3811},
    {948, 3806},
    {957, 3801},
    {972, 3797},
    {980, 3791},
    {982, 3788},
    {977, 3786},
    {977, 3785},
    {975, 3784},
    {970, 3782},
    {968, 3781},
    {972, 3781},
    {965, 3779},
    {968, 3780},
    {967, 3779},
    {963, 3778},
    {963, 3778},
    {965, 3778},
    {965, 3778},
    {963, 3777},
    {965, 3777},
    {963, 3776},
    {962, 3777},
    {960, 3775},
    {960, 3775},
    {962, 3775},
    {960, 3775},
    {960, 3775},
    {962, 3775},
    {960, 3774},
    {960, 3774},
    {960, 3774},
    {957, 3773},
    {958, 3772},
    {957, 3773},
    {955, 3771},
    {955, 3772},
    {953, 3771},
    {952, 3770},
    {953, 3770},
    {952, 3770},
    {955, 3771},
    {952, 3770},
    {952, 3769},
    {953, 3769},
    {950, 3770},
    {947, 3768},
    {948, 3769},
    {950, 3768},
    {948, 3767},
    {948, 3768},
    {943, 3766},
    {945, 3766}
};

// T1 0C
R_PROFILE_STRUC r_profile_t1_bat2[] =
{
    {348, 4155},
    {348, 4132},
    {358, 4114},
    {367, 4098},
    {378, 4085},
    {387, 4069},
    {392, 4049},
    {403, 4029},
    {408, 4010},
    {417, 3994},
    {425, 3981},
    {433, 3968},
    {442, 3956},
    {447, 3943},
    {448, 3928},
    {448, 3912},
    {445, 3895},
    {442, 3879},
    {445, 3867},
    {453, 3858},
    {458, 3849},
    {462, 3840},
    {473, 3833},
    {480, 3827},
    {483, 3820},
    {490, 3813},
    {498, 3808},
    {505, 3803},
    {512, 3798},
    {520, 3795},
    {522, 3790},
    {535, 3786},
    {550, 3784},
    {563, 3780},
    {578, 3775},
    {593, 3771},
    {613, 3766},
    {623, 3759},
    {635, 3749},
    {650, 3739},
    {665, 3727},
    {678, 3714},
    {695, 3705},
    {715, 3700},
    {747, 3697},
    {785, 3692},
    {815, 3688},
    {807, 3683},
    {797, 3677},
    {790, 3673},
    {777, 3665},
    {763, 3658},
    {750, 3649},
    {740, 3643},
    {727, 3636},
    {720, 3630},
    {708, 3625},
    {707, 3621},
    {697, 3616},
    {690, 3613},
    {687, 3610},
    {682, 3606},
    {673, 3603},
    {672, 3602},
    {667, 3598},
    {665, 3596},
    {658, 3593},
    {657, 3591},
    {650, 3589},
    {650, 3587},
    {643, 3584},
    {643, 3582},
    {643, 3581},
    {637, 3579},
    {638, 3579}
};

// T2 25C
R_PROFILE_STRUC r_profile_t2_bat2[] =
{
    {170, 4181},
    {170, 4161},
    {172, 4143},
    {172, 4126},
    {172, 4108},
    {175, 4093},
    {178, 4079},
    {178, 4063},
    {178, 4046},
    {180, 4028},
    {183, 4011},
    {183, 3997},
    {188, 3984},
    {192, 3971},
    {198, 3961},
    {202, 3949},
    {207, 3935},
    {202, 3920},
    {193, 3901},
    {183, 3884},
    {180, 3870},
    {183, 3859},
    {185, 3851},
    {185, 3843},
    {182, 3833},
    {187, 3827},
    {190, 3820},
    {190, 3814},
    {195, 3809},
    {192, 3803},
    {197, 3798},
    {197, 3793},
    {198, 3788},
    {197, 3783},
    {197, 3779},
    {200, 3775},
    {202, 3770},
    {207, 3766},
    {202, 3757},
    {205, 3751},
    {205, 3742},
    {208, 3732},
    {208, 3719},
    {213, 3704},
    {208, 3692},
    {213, 3690},
    {220, 3686},
    {233, 3684},
    {245, 3680},
    {255, 3663},
    {255, 3599},
    {272, 3506},
    {295, 3376},
    {258, 3353},
    {232, 3338},
    {218, 3330},
    {212, 3327},
    {207, 3323},
    {203, 3322},
    {203, 3321},
    {202, 3320},
    {205, 3320},
    {203, 3319},
    {202, 3320},
    {203, 3318},
    {205, 3318},
    {200, 3317},
    {202, 3316},
    {200, 3315},
    {202, 3316},
    {207, 3315},
    {202, 3314},
    {205, 3313},
    {202, 3312},
    {208, 3312}
};

// T3 50C
R_PROFILE_STRUC r_profile_t3_bat2[] =
{
    {157, 4183},
    {157, 4165},
    {155, 4146},
    {155, 4128},
    {160, 4112},
    {157, 4094},
    {157, 4078},
    {157, 4062},
    {160, 4048},
    {162, 4031},
    {162, 4017},
    {162, 4001},
    {163, 3989},
    {165, 3976},
    {172, 3964},
    {172, 3950},
    {175, 3938},
    {175, 3924},
    {172, 3907},
    {165, 3888},
    {162, 3874},
    {160, 3862},
    {158, 3853},
    {160, 3845},
    {162, 3837},
    {158, 3827},
    {162, 3822},
    {162, 3814},
    {163, 3808},
    {167, 3803},
    {165, 3796},
    {172, 3792},
    {172, 3788},
    {172, 3782},
    {172, 3775},
    {163, 3764},
    {162, 3755},
    {163, 3749},
    {165, 3743},
    {167, 3736},
    {167, 3728},
    {167, 3720},
    {165, 3708},
    {165, 3693},
    {163, 3679},
    {165, 3676},
    {165, 3673},
    {172, 3672},
    {177, 3669},
    {177, 3654},
    {182, 3600},
    {188, 3517},
    {197, 3382},
    {190, 3314},
    {170, 3302},
    {165, 3298},
    {160, 3296},
    {158, 3295},
    {158, 3294},
    {155, 3292},
    {158, 3293},
    {155, 3292},
    {152, 3291},
    {155, 3292},
    {157, 3292},
    {153, 3291},
    {153, 3289},
    {153, 3288},
    {155, 3289},
    {153, 3287},
    {152, 3286},
    {153, 3285},
    {153, 3285},
    {155, 3284},
    {155, 3284}
};

// r-table profile for actual temperature. The size should be the same as T1, T2 and T3
R_PROFILE_STRUC r_profile_temperature[] =
{
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0},
    {0, 0}
};


int fgauge_get_saddles(void);
BATTERY_PROFILE_STRUC_P fgauge_get_profile(kal_uint32 temperature);

int fgauge_get_saddles_r_table(void);
R_PROFILE_STRUC_P fgauge_get_profile_r_table(kal_uint32 temperature);
